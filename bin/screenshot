#!/usr/bin/env bash

NAME=~/Pictures/screenshots/$(date '+%d-%m-%Y-%T').png

if [[ $1 = "full" ]]; then
	maim $NAME
elif [[ $1 = "selection" ]]; then
	maim -s $NAME
else
	notify-send.py "Screenshot error" "Need more arguments to run"
	exit
fi

ACTION=$(notify-send.py "Screenshot" "Screenshot saved at $NAME" --action screenshot_open:Open screenshot_copy:Copy screenshot_edit:Edit screenshot_delete:Delete --hint string:image-path:camera | { read first rest ; echo $first ; })


case "$ACTION" in
	screenshot_open)
		eog $NAME
	;;
	screenshot_copy)
    xclip -selection clipboard -t image/png -filter $NAME
	;;
	screenshot_edit)
		gimp $NAME >/dev/null
	;;
	screenshot_delete)
		rm $NAME
	;;
esac
